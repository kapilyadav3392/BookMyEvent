{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Event - BookMyEvent</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Add more ticket rows dynamically
    function addTicket() {
      const container = document.getElementById('ticketsContainer');
      const index = container.children.length;
      const html = `
      <div class="row g-2 mb-2 ticket-row">
        <div class="col-md-4">
          <select name="ticket_name_${index}" class="form-select" required>
            <option value="">Select Ticket Type</option>
            <option value="Early Bird">Early Bird</option>
            <option value="Regular">Regular</option>
            <option value="VIP">VIP</option>
          </select>
        </div>
        <div class="col-md-3">
          <input type="number" name="ticket_price_${index}" class="form-control" placeholder="Price" min="0" step="0.01" required>
        </div>
        <div class="col-md-3">
          <input type="number" name="ticket_quantity_${index}" class="form-control" placeholder="Quantity" min="1" required>
        </div>
        <div class="col-md-2">
          <button type="button" class="btn btn-danger w-100" onclick="this.closest('.ticket-row').remove()">Remove</button>
        </div>
      </div>`;
      container.insertAdjacentHTML('beforeend', html);
    }
  </script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
  <div class="container">
    <a class="navbar-brand" href="{% url 'account:event_manage' %}">BookMyEvent</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="{% url 'account:event_manage' %}">Dashboard</a></li>
      </ul>
      <span class="navbar-text me-2">Hello, {{ user.username }}</span>
      <a class="btn btn-outline-primary" href="{% url 'account:logout' %}">Logout</a>
    </div>
  </div>
</nav>

<div class="container">
  <h2>Edit Event</h2>
  {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label class="form-label">Event Title</label>
      <input type="text" name="title" class="form-control" value="{{ event.title }}" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Description</label>
      <textarea name="description" class="form-control" rows="4" required>{{ event.description }}</textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Location</label>
      <input type="text" name="location" class="form-control" value="{{ event.location }}" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Date & Time</label>
      <input type="datetime-local" name="date" class="form-control" value="{{ event.date|date:'Y-m-d\\TH:i' }}" required>
    </div>

    <h4>Tickets</h4>
    <div id="ticketsContainer">
      {% for ticket in event.ticket_types.all %}
      <div class="row g-2 mb-2 ticket-row">
        <div class="col-md-4">
          <select name="ticket_name_{{ forloop.counter0 }}" class="form-select" required>
            <option value="">Select Ticket Type</option>
            <option value="Early Bird" {% if ticket.name == "Early Bird" %}selected{% endif %}>Early Bird</option>
            <option value="Regular" {% if ticket.name == "Regular" %}selected{% endif %}>Regular</option>
            <option value="VIP" {% if ticket.name == "VIP" %}selected{% endif %}>VIP</option>
          </select>
        </div>
        <div class="col-md-3">
          <input type="number" name="ticket_price_{{ forloop.counter0 }}" class="form-control" value="{{ ticket.price }}" placeholder="Price" min="0" step="0.01" required>
        </div>
        <div class="col-md-3">
          <input type="number" name="ticket_quantity_{{ forloop.counter0 }}" class="form-control" value="{{ ticket.quantity }}" placeholder="Quantity" min="1" required>
        </div>
        <div class="col-md-2">
          <button type="button" class="btn btn-danger w-100" onclick="this.closest('.ticket-row').remove()">Remove</button>
        </div>
      </div>
      {% endfor %}
    </div>

    <button type="button" class="btn btn-secondary mb-3" onclick="addTicket()">Add Ticket Type</button>

    <button type="submit" class="btn btn-primary">Update Event</button>
  </form>
</div>

<footer class="bg-light text-center p-3 mt-4">
  &copy; 2025 BookMyEvent
</footer>

</body>
</html> {% endcomment %}


<!DOCTYPE html>
<html>
<head>
    <title>Edit Event</title>
    <style>
        body { font-family: Arial; background: #f3f4f6; padding: 20px; }
        .container { width: 900px; margin: auto; }
        .box {
            background: white; padding: 20px; border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15); margin-top: 20px;
        }
        input, textarea {
            width: 100%; padding: 10px; margin: 8px 0;
            border-radius: 5px; border: 1px solid #ccc;
        }
        .btn {
            padding: 10px 16px; background: #007bff; color: white;
            border: none; border-radius: 5px; cursor: pointer;
        }
        .btn:hover { background: #0056b3; }

        .ticket-row {
            display: grid; grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px; align-items: center;
            margin-bottom: 10px;
        }
        .delete-check { transform: scale(1.3); cursor: pointer; }

        nav {
            background: black; padding: 15px;
        }
        nav a { color: white; text-decoration: none; margin-right: 20px; }
        footer { text-align: center; padding: 20px; color: #555; }
    </style>
</head>
<body>

<nav>
    <a href="/manage/">Dashboard</a>
    <a href="/logout/">Logout</a>
</nav>

<div class="container">
    <h2>Edit Event</h2>

    <div class="box">
        {% if editing_locked %}
            <p style="color:red; font-weight:bold;">
                Event is locked because its date has passed. Editing disabled.
            </p>
        {% endif %}

        <form method="POST">
            {% csrf_token %}

            <label>Title</label>
            <input type="text" name="title" value="{{ event.title }}" {% if editing_locked %}disabled{% endif %}>

            <label>Description</label>
            <textarea name="description" rows="4" {% if editing_locked %}disabled{% endif %}>{{ event.description }}</textarea>

            <label>Location</label>
            <input type="text" name="location" value="{{ event.location }}" {% if editing_locked %}disabled{% endif %}>

            <label>Date</label>
            <input type="datetime-local" name="date" value="{{ event.date|date:'Y-m-d\TH:i' }}" {% if editing_locked %}disabled{% endif %}>

            <h3>Ticket Types</h3>

            {% for t in ticket_types %}
            <div class="ticket-row">
                <input type="text" name="name_{{ t.id }}" value="{{ t.name }}" {% if editing_locked %}disabled{% endif %}>
                <input type="number" name="price_{{ t.id }}" value="{{ t.price }}" {% if editing_locked %}disabled{% endif %}>
                <input type="number" name="quantity_{{ t.id }}" value="{{ t.quantity }}" {% if editing_locked %}disabled{% endif %}>

                {% if not editing_locked %}
                <input type="checkbox" name="delete_ticket_type" value="{{ t.id }}" class="delete-check">
                {% endif %}
            </div>
            {% endfor %}

            {% if not editing_locked %}
            <h3>Add New Ticket Type</h3>
            <div class="ticket-row">
                <input type="text" name="new_name" placeholder="Ticket Type Name">
                <input type="number" name="new_price" placeholder="Price">
                <input type="number" name="new_quantity" placeholder="Qty">
            </div>

            <button class="btn" type="submit">Save Changes</button>
            {% endif %}
        </form>
    </div>
</div>

<footer>
    BookMyEvent © 2025 — Manage your events easily
</footer>

</body>
</html>

